import{S as L,T as M}from"./SearchForm-CSBbbiMC.js";import{W}from"./WForm-DIasoZiv.js";import{_ as V,b as l,u as R,o as m,T as H,w as i,f as K,c as n,h as b,g as u,a0 as q,j as v,k as D,B as T,d as O,V as U,e as k,Z as B,U as E}from"./index-C75yrSxv.js";import{_ as $}from"./index-CrwAtV-J.js";import{u as G,_ as J}from"./index.es--CQYwhSW.js";import"./index-BUFb_l2c.js";import"./Col-DTkjBlJL.js";import"./debounce-CN_rIKSS.js";import"./index-C_MRxJ4F.js";import"./List-bYv9SaMX.js";import"./index-lYwMDmlm.js";import"./index-BujYrMaM.js";import"./index-CeCNycme.js";const j={class:"footer"},P={__name:"Edit",emits:["success"],setup(z,{expose:h,emit:y}){const r=l({}),o=l(!1),d=l(""),x=y,c=l(!1),{SEND_MESSAGE:w}=R(),S=async()=>{if(!await d.value.validate())return;const t={type:"setAiBoxNetwork",...r.value};v.on(t.type,e=>{e.result===0?(D.success("æ“ä½œæˆåŠŸ"),o.value=!1,x("success")):D.error("è¯·æ±‚å¤±è´¥"),c.value=!1,v.off(t.type)}),c.value=!0,w(t)},_=p=>{r.value=JSON.parse(JSON.stringify(p)),o.value=!0,c.value=!1},f=()=>{o.value=!1},C=[{type:"input",label:"ç½‘ç»œåç§°",key:"name"},{type:"select",label:"åˆ†é…æ–¹å¼",key:"dhcp",list:[{value:0,label:"æ‰‹åŠ¨é…ç½®"},{value:1,label:"è‡ªåŠ¨é…ç½®"}]},{type:"input",label:"ç½‘ç»œåœ°å€",key:"address"},{type:"input",label:"å­ç½‘æŽ©ç ",key:"mask"},{type:"input",label:"ç½‘å…³åœ°å€",key:"gateway"},{type:"input",label:"DNS",key:"dns"}],N={name:[{required:!0,message:"è¯·è¾“å…¥",trigger:"blur"}],address:[{required:!0,message:"è¯·è¾“å…¥",trigger:"blur"}],dhcp:[{required:!0,message:"è¯·è¾“å…¥",trigger:"blur"}],mask:[{required:!0,message:"è¯·è¾“å…¥",trigger:"blur"}],gateway:[{required:!0,message:"è¯·è¾“å…¥",trigger:"blur"}],dns:[{required:!0,message:"è¯·è¾“å…¥",trigger:"blur"}]};return h({showDrawer:_}),(p,t)=>{const e=T,a=$;return m(),H(a,{open:u(o),"onUpdate:open":t[1]||(t[1]=s=>q(o)?o.value=s:null),title:"ç¼–è¾‘",width:"520","footer-style":{textAlign:"right"},onClose:f},{footer:i(()=>[K("div",j,[n(e,{type:"primary",onClick:S},{default:i(()=>t[2]||(t[2]=[b("ç¡®è®¤")])),_:1}),n(e,{class:"close",onClick:f},{default:i(()=>t[3]||(t[3]=[b("å–æ¶ˆ")])),_:1})])]),default:i(()=>[n(W,{ref_key:"wFormRef",ref:d,modelValue:u(r),"onUpdate:modelValue":t[0]||(t[0]=s=>q(r)?r.value=s:null),formList:C,rules:N,labelWidth:"100px"},null,8,["modelValue"])]),_:1},8,["open"])}}},Z=V(P,[["__scopeId","data-v-5542f433"]]),Q={class:"networkConfig-container"},X={key:0},Y={key:1},ee={key:2},te={__name:"index",setup(z){const{SEND_MESSAGE:h}=R(),y=l([]),r=l(0),o=O(()=>({total:r.value,current:w.value,pageSize:S.value})),d=()=>{const e={type:"getAiBoxNetwork"};v.on(e.type,a=>{a.result===0?y.value=a.data.Interfaces:D.error("è¯·æ±‚å¤±è´¥"),v.off(e.type)}),h(e)},{run:x,loading:c,current:w,pageSize:S}=G(d,{formatResult:e=>e.data.results,pagination:{currentKey:"page",pageSizeKey:"results"}}),_=l(""),f=e=>{_.value.showDrawer(e)},C=(e,a,s)=>{console.log("ðŸš€ ~ handleTableChange ~ pag, filters, sorter:",e,a,s),x({results:e.pageSize,page:e==null?void 0:e.current,sortField:s.field,sortOrder:s.order,...a})},N=[{type:"input",key:"keyWord",label:"ç½‘ç»œåç§°"},{type:"select",key:"screenKey",label:"è¿žæŽ¥çŠ¶æ€",list:[{value:"name",label:"å·²è¿žæŽ¥"},{value:"description",label:"æœªè¿žæŽ¥"},{value:"description",label:"è¿è¡Œä¸­"}]}],p=[{title:"ç½‘ç»œåç§°",dataIndex:"name",key:"name"},{title:"ç½‘ç»œåœ°å€",dataIndex:"address",key:"address"},{title:"å­ç½‘æŽ©ç ",dataIndex:"mask",key:"mask"},{title:"ç½‘å…³åœ°å€",dataIndex:"gateway",key:"gateway"},{title:"ç‰©ç†åœ°å€",dataIndex:"mac",key:"mac"},{title:"åˆ†é…æ–¹å¼",dataIndex:"dhcp",key:"dhcp",width:180},{title:"DNS",dataIndex:"dns",key:"dns"},{title:"è¿žæŽ¥çŠ¶æ€",key:"status",dataIndex:"status"},{title:"æ“ä½œ",key:"action"}],t=l({x:"100%",y:document.body.clientHeight-380});return U(()=>{window.onresize=()=>(()=>{t.value.y=document.body.clientHeight-380})()}),(e,a)=>{const s=M,A=T,F=J;return m(),k("div",Q,[n(L,{searchList:N}),n(F,{columns:p,"data-source":u(y),pagination:u(o),loading:u(c),onChange:C,scroll:u(t)},{bodyCell:i(({column:I,record:g})=>[I.key==="status"?(m(),k("span",X,[n(s,{color:g.status?"volcano":"green"},{default:i(()=>[b(B(g.status?"å¼‚å¸¸":"æ­£å¸¸"),1)]),_:2},1032,["color"])])):E("",!0),I.key==="dhcp"?(m(),k("span",Y,B(g.dhcp?"è‡ªåŠ¨":"æ‰‹åŠ¨"),1)):E("",!0),I.key==="action"?(m(),k("span",ee,[n(A,{type:"link",onClick:ae=>f(g)},{default:i(()=>a[0]||(a[0]=[b("ç¼–è¾‘")])),_:2},1032,["onClick"])])):E("",!0)]),_:1},8,["data-source","pagination","loading","scroll"]),n(Z,{ref_key:"editRef",ref:_,onSuccess:d},null,512)])}}},fe=V(te,[["__scopeId","data-v-1a6d9530"]]);export{fe as default};
